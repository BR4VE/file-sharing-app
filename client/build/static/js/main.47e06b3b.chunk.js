(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{119:function(e,t){},142:function(e,t){},144:function(e,t){},162:function(e,t,a){},163:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(10),c=a.n(r),o=a(23),i=a(9),u=a(45),m=a(78),b=a.n(m),s=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{bg:"light",variant:"light"},l.a.createElement(u.a.Brand,{href:"#home"},l.a.createElement("img",{alt:"",src:b.a,width:"30",height:"30",className:"d-inline-block align-top"})," ","File Sharing")))},d=a(80),f=function(e){return l.a.createElement(d.a,null,e.children)},E=a(6),p=a(81),y=a.n(p),h=a(82),v=a.n(h),g=a(5),j={marginTop:"20px",minHeight:"25vh"},O={textAlign:"center"},k={fontSize:"4rem",color:"#ff6a6c",cursor:"pointer"},N=function(e){var t=e.setLobbyNum,a=Object(n.useCallback)((function(){v.a.get("/create-lobby").then((function(e){return e.data})).then((function(e){e.lobbyNum&&t(e.lobbyNum)}))}),[t]);return l.a.createElement(g.a,{style:j},l.a.createElement(g.a.Body,null,l.a.createElement(g.a.Title,null,"Create Lobby"),l.a.createElement(g.a.Subtitle,{className:"mb-2 text-muted font-italic"},"You can share your files with other users in the lobby"),l.a.createElement("hr",null),l.a.createElement("div",null,l.a.createElement(o.a,null,l.a.createElement(i.a,null),l.a.createElement(i.a,{style:O},l.a.createElement("span",{style:k,onClick:a},"+")),l.a.createElement(i.a,null)))))},S=a(14),x=a(25),C=a(24),L=a(167),T=a(29),w=a.n(T),A=a(83),B={backgroundColor:"#f1f1f1",borderRadius:"7px"},z={padding:"0.01em 16px",textAlign:"center",backgroundColor:"#FF6A6C",borderRadius:"7px"},J=function(e){var t=e.percentage,a=void 0===t?0:t,n=a<25?25:a;return l.a.createElement("div",{style:B},l.a.createElement("div",{style:Object(A.a)({},z,{width:n+"%"})},a,"%"))},H={marginTop:"20px",minHeight:"25vh"},R={textAlign:"center"},F={fontSize:"4rem",color:"#ff6a6c",cursor:"pointer"},I=function(e){var t=e.lobbyNumber,a=e.socket,r="Lobby: #"+t,c=Object(n.useState)({}),u=Object(E.a)(c,2),m=u[0],b=u[1],s=Object(n.useState)(0),d=Object(E.a)(s,2),f=d[0],p=d[1],y=Object(n.useState)(!0),h=Object(E.a)(y,2),v=h[0],j=h[1],O=Object(n.useCallback)((function(e){return b(e[0])}),[]),k=Object(n.useCallback)((function(){j(!1);var e=w.a.createStream();w()(a).emit("file-upload",e,{size:m.size,name:m.name}),w.a.createBlobReadStream(m).on("data",(function(e){p((function(t){var n=t+e.length,l=Math.floor(n/m.size*100);return a.emit("file-upload-progress",l),n}))})),w.a.createBlobReadStream(m).pipe(e)}),[m,a]),N=Math.floor(f/m.size*100);return l.a.createElement(g.a,{style:H},l.a.createElement(g.a.Body,null,l.a.createElement(g.a.Title,null,r),l.a.createElement(g.a.Subtitle,{className:"mb-2 text-muted font-italic"},"Click to add your file (one file per upload)"),l.a.createElement("hr",null),l.a.createElement("div",null,m&&m.name?l.a.createElement(S.a,{className:"mb-3"},l.a.createElement(C.a,{placeholder:m.name,"aria-label":m.name,"aria-describedby":"file",disabled:!0}),l.a.createElement(S.a.Append,null,l.a.createElement(x.a,{variant:"outline-secondary",onClick:k,disabled:!v},"Send"))):null,N>0?l.a.createElement(J,{percentage:N}):null,l.a.createElement(o.a,null,l.a.createElement(i.a,null),l.a.createElement(i.a,{style:R},v?l.a.createElement(L.a,{onChange:O},l.a.createElement("span",{style:F},"+")):null),l.a.createElement(i.a,null)))))},M={marginTop:"20px",minHeight:"15vh"},U=function(e){var t=Object(n.useState)(""),a=Object(E.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(!1),i=Object(E.a)(o,1)[0],u=e.setLobbyNum,m=e.setJoinedToLobby,b=Object(n.useCallback)((function(e){c(e.target.value)}),[]),s=Object(n.useCallback)((function(){r&&(u(r),m(!0))}),[r,m,u]);return l.a.createElement(g.a,{style:M},l.a.createElement(g.a.Body,null,l.a.createElement(g.a.Title,null,"Join a Room"),l.a.createElement(g.a.Subtitle,{className:"mb-2 text-muted font-italic"},"Enter the lobby number without #"),l.a.createElement("hr",null),l.a.createElement("div",null,l.a.createElement(S.a,{className:"mb-3"},l.a.createElement(C.a,{placeholder:"112233","aria-label":"lobby-number","aria-describedby":"basic-addon2",onChange:b,disabled:i}),l.a.createElement(S.a.Append,null,l.a.createElement(x.a,{variant:"outline-secondary",onClick:s,disabled:i},"Join"))))))},Y=a(46),D={marginTop:"20px",minHeight:"25vh"},P=function(e){var t=Object(n.useState)([]),a=Object(E.a)(t,2),r=a[0],c=a[1],o=e.socket;Object(n.useEffect)((function(){if(o)return o.on("lobby-user-info",(function(e){c(e.usersInLobby)})),function(){o.removeAllListeners("lobby-user-info")}}),[o]);var i=r.map((function(e){return l.a.createElement(Y.a.Item,{key:e},e===o.id.split("#")[1]?"You":"User#"+e)}));return i=i.length?i:l.a.createElement("span",{className:"font-italic text-muted"},"Currently, there are no users in your lobby"),l.a.createElement(g.a,{style:D},l.a.createElement(g.a.Body,null,l.a.createElement(g.a.Title,null,"Users in the Lobby:"),l.a.createElement("hr",null),l.a.createElement("div",null,l.a.createElement(Y.a,null,i))))},q={marginTop:"20px",minHeight:"25vh"},G=function(e){var t=Object(n.useState)(null),a=Object(E.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(0),i=Object(E.a)(o,2),u=i[0],m=i[1],b=e.lobbyNumber,s=e.socket,d=e.joinedToLobby,f="Lobby: #"+b;Object(n.useEffect)((function(){if(d&&s)return s.on("file-download-end",(function(e){c(e)})),s.on("lobby-file-info",(function(e){e.fileName&&c(e)})),s.on("file-upload-progress",(function(e){return m(e)})),function(){s.removeAllListeners("file-event-end"),s.removeAllListeners("lobby-file-info"),s.removeAllListeners("file-upload-progess")}}),[d,s]);var p=Object(n.useCallback)((function(){window.open("/lobby/"+b+"/download/"+r.fileName)}),[r,b]);return l.a.createElement(g.a,{style:q},l.a.createElement(g.a.Body,null,l.a.createElement(g.a.Title,null,f),l.a.createElement(g.a.Subtitle,{className:"mb-2 text-muted font-italic"},"Please wait until the file is fully uploaded"),l.a.createElement("hr",null),l.a.createElement("div",null,r?l.a.createElement(S.a,{className:"mb-3"},l.a.createElement(C.a,{placeholder:r.fileName,"aria-label":r.fileName,"aria-describedby":"file",disabled:!0}),l.a.createElement(S.a.Append,null,l.a.createElement(x.a,{variant:"outline-secondary",onClick:p},"Download"))):l.a.createElement(J,{percentage:u}))))},K={marginTop:"8vh"},Q=function(){var e,t=Object(n.useState)(null),a=Object(E.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(!1),i=Object(E.a)(o,2),u=i[0],m=i[1],b=Object(n.useState)(null),s=Object(E.a)(b,2),d=s[0],f=s[1];switch(Object(n.useEffect)((function(){if(r){var e=y()("/lobby-"+r,{transports:["websocket"]});return f(e),function(){e.disconnect()}}}),[r]),!0){case u:e=l.a.createElement(G,{lobbyNumber:r,joinedToLobby:u,socket:d});break;case!!r:e=l.a.createElement(I,{lobbyNumber:r,socket:d});break;default:e=l.a.createElement(N,{setLobbyNum:c})}return l.a.createElement("div",{style:K},e,r?l.a.createElement(P,{socket:d}):l.a.createElement(U,{setLobbyNum:c,setJoinedToLobby:m}))},V=function(){return l.a.createElement("div",null,l.a.createElement(s,null),l.a.createElement(f,null,l.a.createElement(o.a,null,l.a.createElement(i.a,null),l.a.createElement(i.a,{sm:8,md:8,lg:6},l.a.createElement(Q,null)),l.a.createElement(i.a,null))))};a(161),a(162);var W=function(){return Object(n.useEffect)((function(){}),[]),l.a.createElement("div",{className:"App"},l.a.createElement(V,null))};c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(W,null)),document.getElementById("root"))},78:function(e,t,a){e.exports=a.p+"static/media/icon.9216203c.png"},84:function(e,t,a){e.exports=a(163)}},[[84,1,2]]]);
//# sourceMappingURL=main.47e06b3b.chunk.js.map