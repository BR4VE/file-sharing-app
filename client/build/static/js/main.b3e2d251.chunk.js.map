{"version":3,"sources":["Components/Navbar/Navbar.js","Components/Body/Body.js","Components/CreateLobbyCard/CreateLobbyCard.js","Components/DownloadProgressBar/DownloadProgressBar.js","Components/UploadFileCard/UploadFileCard.js","Components/JoinToLobbyCard/JoinToLobbyCard.js","Components/UserListCard/UserListCard.js","Components/DownloadFileCard/DownloadFileCard.js","Components/FileSharingBox/FileSharingBox.js","Components/FileSharingApp/FileSharingApp.js","App.js","index.js","images/icon.png"],"names":["NavBar","Navbar","bg","variant","Brand","href","alt","src","Icon","width","height","className","Body","props","Container","children","cardStyle","marginTop","minHeight","colStyle","textAlign","plusStyle","fontSize","color","cursor","CreateLobbyCard","setLobbyNum","createLobby","useCallback","axios","get","then","res","data","lobbyNum","Card","style","Title","Subtitle","Row","Col","onClick","progressBarOuterStyle","backgroundColor","borderRadius","progressBarInnerStyle","padding","DownloadProgressBar","percentage","widthPercentage","UploadFileCard","lobbyNumber","socket","lobbyNumberText","useState","currentFile","setCurrentFile","uploadedFileSize","setUploaddedFileSize","canUploadFile","setCanUploadFile","onFileChange","files","sendFile","stream","ss","createStream","emit","size","name","createBlobReadStream","on","chunk","totalSize","length","Math","floor","pipe","uploadPercentage","InputGroup","FormControl","placeholder","aria-label","aria-describedby","disabled","Append","Button","InputFiles","onChange","JoinToLobbyCard","inputValue","setInputValue","isPending","setJoinedToLobby","handleInputChange","event","target","value","joinLobby","UserListCard","users","setUsers","useEffect","usersInLobby","removeAllListeners","userJsx","map","userId","ListGroup","Item","key","id","split","DownloadFileCard","currentFileInformation","setCurrentFileInformation","setUploadPercentage","joinedToLobby","fileName","downloadFile","window","open","FileSharingBoxStyle","FileSharingBox","upperCard","setSocket","sckt","io","transports","console","log","disconnect","FileSharingApp","sm","md","lg","App","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.b3e2d251.chunk.js","sourcesContent":["// lib imports\r\nimport React from \"react\";\r\nimport Navbar from \"react-bootstrap/Navbar\";\r\n\r\n// image imports\r\nimport Icon from \"../../images/icon.png\";\r\n\r\nconst NavBar = () => {\r\n  return (\r\n    <>\r\n      <Navbar bg=\"light\" variant=\"light\">\r\n        <Navbar.Brand href=\"#home\">\r\n          <img\r\n            alt=\"\"\r\n            src={Icon}\r\n            width=\"30\"\r\n            height=\"30\"\r\n            className=\"d-inline-block align-top\"\r\n          />{\" \"}\r\n          File Sharing\r\n        </Navbar.Brand>\r\n      </Navbar>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n","// lib imports\r\nimport React from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\n\r\nconst Body = props => <Container>{props.children}</Container>;\r\n\r\nexport default Body;\r\n","// lib imports\r\nimport React, { useCallback } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport axios from \"axios\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\n\r\nconst CreateLobbyCard = props => {\r\n  const { setLobbyNum } = props;\r\n\r\n  const createLobby = useCallback(() => {\r\n    axios\r\n      .get(\"/create-lobby\")\r\n      .then(res => res.data)\r\n      .then(data => {\r\n        if (data.lobbyNum) {\r\n          setLobbyNum(data.lobbyNum);\r\n        }\r\n      });\r\n    // then set hasCreated\r\n  }, [setLobbyNum]);\r\n\r\n  return (\r\n    <Card style={cardStyle}>\r\n      <Card.Body>\r\n        <Card.Title>Create Lobby</Card.Title>\r\n        <Card.Subtitle className=\"mb-2 text-muted font-italic\">\r\n          You can share your files with other users in the lobby\r\n        </Card.Subtitle>\r\n        <hr />\r\n        <div>\r\n          <Row>\r\n            <Col />\r\n            <Col style={colStyle}>\r\n              <span style={plusStyle} onClick={createLobby}>\r\n                +\r\n              </span>\r\n            </Col>\r\n            <Col />\r\n          </Row>\r\n        </div>\r\n      </Card.Body>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst cardStyle = {\r\n  marginTop: \"20px\",\r\n  minHeight: \"25vh\"\r\n};\r\n\r\nconst colStyle = {\r\n  textAlign: \"center\"\r\n};\r\n\r\nconst plusStyle = {\r\n  fontSize: \"4rem\",\r\n  color: \"#ff6a6c\",\r\n  cursor: \"pointer\"\r\n};\r\n\r\nCreateLobbyCard.propTypes = {\r\n  setLobbyNum: PropTypes.func.isRequired\r\n};\r\n\r\nexport default CreateLobbyCard;\r\n","// lib imports\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst DownloadProgressBar = props => {\r\n  let { percentage = 0 } = props;\r\n  let widthPercentage = percentage < 25 ? 25 : percentage;\r\n\r\n  return (\r\n    <div style={progressBarOuterStyle}>\r\n      <div\r\n        style={{\r\n          ...progressBarInnerStyle,\r\n          width: widthPercentage + \"%\"\r\n        }}\r\n      >\r\n        {percentage}%\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst progressBarOuterStyle = {\r\n  backgroundColor: \"#f1f1f1\",\r\n  borderRadius: \"7px\"\r\n};\r\n\r\nconst progressBarInnerStyle = {\r\n  padding: \"0.01em 16px\",\r\n  textAlign: \"center\",\r\n  backgroundColor: \"#FF6A6C\",\r\n  borderRadius: \"7px\"\r\n};\r\n\r\nDownloadProgressBar.propTypes = {\r\n  percentage: PropTypes.number.isRequired\r\n};\r\n\r\nexport default DownloadProgressBar;\r\n","// lib imports\r\nimport React, { useCallback, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport InputFiles from \"react-input-files\";\r\nimport ss from \"socket.io-stream\";\r\nimport DownloadProgressBar from \"../DownloadProgressBar/DownloadProgressBar\";\r\n\r\nconst UploadFileCard = props => {\r\n  const { lobbyNumber, socket } = props;\r\n  const lobbyNumberText = \"Lobby: #\" + lobbyNumber;\r\n  const [currentFile, setCurrentFile] = useState({});\r\n  const [uploadedFileSize, setUploaddedFileSize] = useState(0);\r\n  const [canUploadFile, setCanUploadFile] = useState(true);\r\n\r\n  const onFileChange = useCallback(files => setCurrentFile(files[0]), []);\r\n  const sendFile = useCallback(() => {\r\n    // disable buttons\r\n    setCanUploadFile(false);\r\n\r\n    const stream = ss.createStream();\r\n    ss(socket).emit(\"file-upload\", stream, {\r\n      size: currentFile.size,\r\n      name: currentFile.name\r\n    });\r\n    // use blob\r\n    const blobStream = ss.createBlobReadStream(currentFile);\r\n\r\n    blobStream.on(\"data\", chunk => {\r\n      setUploaddedFileSize(size => {\r\n        const totalSize = size + chunk.length;\r\n        // send progress to every user in the room\r\n        const percentage = Math.floor((totalSize / currentFile.size) * 100);\r\n        socket.emit(\"file-upload-progress\", percentage);\r\n        return totalSize;\r\n      });\r\n    });\r\n\r\n    ss.createBlobReadStream(currentFile).pipe(stream);\r\n  }, [currentFile, socket]);\r\n\r\n  //\r\n  const uploadPercentage = Math.floor(\r\n    (uploadedFileSize / currentFile.size) * 100\r\n  );\r\n\r\n  return (\r\n    <Card style={cardStyle}>\r\n      <Card.Body>\r\n        <Card.Title>{lobbyNumberText}</Card.Title>\r\n        <Card.Subtitle className=\"mb-2 text-muted font-italic\">\r\n          Click to add your file (one file per upload)\r\n        </Card.Subtitle>\r\n        <hr />\r\n        <div>\r\n          {currentFile && currentFile.name ? (\r\n            <InputGroup className=\"mb-3\">\r\n              <FormControl\r\n                placeholder={currentFile.name}\r\n                aria-label={currentFile.name}\r\n                aria-describedby=\"file\"\r\n                disabled={true}\r\n              />\r\n              <InputGroup.Append>\r\n                <Button\r\n                  variant=\"outline-secondary\"\r\n                  onClick={sendFile}\r\n                  disabled={!canUploadFile}\r\n                >\r\n                  Send\r\n                </Button>\r\n              </InputGroup.Append>\r\n            </InputGroup>\r\n          ) : null}\r\n          {/* Ä±f the file is getting uploaded */}\r\n          {uploadPercentage > 0 ? (\r\n            <DownloadProgressBar percentage={uploadPercentage} />\r\n          ) : null}\r\n          <Row>\r\n            <Col />\r\n\r\n            <Col style={colStyle}>\r\n              {canUploadFile ? (\r\n                <InputFiles onChange={onFileChange}>\r\n                  <span style={plusStyle}>+</span>\r\n                </InputFiles>\r\n              ) : null}\r\n            </Col>\r\n            <Col />\r\n          </Row>\r\n        </div>\r\n      </Card.Body>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst cardStyle = {\r\n  marginTop: \"20px\",\r\n  minHeight: \"25vh\"\r\n};\r\n\r\nconst colStyle = {\r\n  textAlign: \"center\"\r\n};\r\n\r\nconst plusStyle = {\r\n  fontSize: \"4rem\",\r\n  color: \"#ff6a6c\",\r\n  cursor: \"pointer\"\r\n};\r\n\r\nUploadFileCard.propTypes = {\r\n  lobbyNumber: PropTypes.number.isRequired,\r\n  socket: PropTypes.shape({\r\n    on: PropTypes.func.isRequired,\r\n    emit: PropTypes.func.isRequired\r\n  })\r\n};\r\n\r\nexport default UploadFileCard;\r\n","// lib imports\r\nimport React, { useCallback, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nconst JoinToLobbyCard = props => {\r\n  const [inputValue, setInputValue] = useState(\"\");\r\n  const [isPending] = useState(false);\r\n\r\n  // set when connected to a lobby\r\n  const { setLobbyNum, setJoinedToLobby } = props;\r\n\r\n  const handleInputChange = useCallback(event => {\r\n    setInputValue(event.target.value);\r\n  }, []);\r\n\r\n  const joinLobby = useCallback(() => {\r\n    if (!inputValue) return;\r\n\r\n    setLobbyNum(inputValue);\r\n    setJoinedToLobby(true);\r\n  }, [inputValue, setJoinedToLobby, setLobbyNum]);\r\n\r\n  return (\r\n    <Card style={cardStyle}>\r\n      <Card.Body>\r\n        <Card.Title>Join a Room</Card.Title>\r\n        <Card.Subtitle className=\"mb-2 text-muted font-italic\">\r\n          Enter the lobby number without #\r\n        </Card.Subtitle>\r\n        <hr />\r\n        <div>\r\n          <InputGroup className=\"mb-3\">\r\n            <FormControl\r\n              placeholder=\"112233\"\r\n              aria-label=\"lobby-number\"\r\n              aria-describedby=\"basic-addon2\"\r\n              onChange={handleInputChange}\r\n              disabled={isPending}\r\n            />\r\n            <InputGroup.Append>\r\n              <Button\r\n                variant=\"outline-secondary\"\r\n                onClick={joinLobby}\r\n                disabled={isPending}\r\n              >\r\n                Join\r\n              </Button>\r\n            </InputGroup.Append>\r\n          </InputGroup>\r\n        </div>\r\n      </Card.Body>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst cardStyle = {\r\n  marginTop: \"20px\",\r\n  minHeight: \"15vh\"\r\n};\r\n\r\nJoinToLobbyCard.propTypes = {\r\n  setLobbyNum: PropTypes.func.isRequired,\r\n  setJoinedToLobby: PropTypes.func.isRequired\r\n};\r\n\r\nexport default JoinToLobbyCard;\r\n","// lib imports\r\nimport React, { useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport ListGroup from \"react-bootstrap/ListGroup\";\r\n\r\nconst UserListCard = props => {\r\n  const [users, setUsers] = useState([]);\r\n  const { socket } = props;\r\n\r\n  useEffect(() => {\r\n    // add listener for users if there is a socket\r\n    if (!socket) return;\r\n\r\n    socket.on(\"lobby-user-info\", data => {\r\n      setUsers(data.usersInLobby);\r\n    });\r\n\r\n    return () => {\r\n      socket.removeAllListeners(\"lobby-user-info\");\r\n    };\r\n  }, [socket]);\r\n\r\n  let userJsx = users.map(userId => (\r\n    <ListGroup.Item key={userId}>\r\n      {userId === socket.id.split(\"#\")[1] ? \"You\" : \"User#\" + userId}\r\n    </ListGroup.Item>\r\n  ));\r\n\r\n  userJsx = userJsx.length ? (\r\n    userJsx\r\n  ) : (\r\n    <span className=\"font-italic text-muted\">\r\n      Currently, there are no users in your lobby\r\n    </span>\r\n  );\r\n\r\n  return (\r\n    <Card style={cardStyle}>\r\n      <Card.Body>\r\n        <Card.Title>Users in the Lobby:</Card.Title>\r\n        <hr />\r\n        <div>\r\n          <ListGroup>{userJsx}</ListGroup>\r\n        </div>\r\n      </Card.Body>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst cardStyle = {\r\n  marginTop: \"20px\",\r\n  minHeight: \"25vh\"\r\n};\r\n\r\nUserListCard.propTypes = {\r\n  socket: PropTypes.shape({\r\n    on: PropTypes.func.isRequired,\r\n    emit: PropTypes.func.isRequired\r\n  })\r\n};\r\n\r\nexport default UserListCard;\r\n","// lib imports\r\nimport React, { useEffect, useState, useCallback } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\n// component imports\r\nimport DownloadProgressBar from \"../DownloadProgressBar/DownloadProgressBar\";\r\n\r\nconst DownloadFileCard = props => {\r\n  const [currentFileInformation, setCurrentFileInformation] = useState(null);\r\n  const [uploadPercentage, setUploadPercentage] = useState(0);\r\n  const { lobbyNumber, socket, joinedToLobby } = props;\r\n  const lobbyNumberText = \"Lobby: #\" + lobbyNumber;\r\n\r\n  useEffect(() => {\r\n    // if the user is not the sender (receiver)\r\n    // set an on download event\r\n    if (!joinedToLobby || !socket) return;\r\n\r\n    socket.on(\"file-download-end\", data => {\r\n      setCurrentFileInformation(data);\r\n    });\r\n\r\n    socket.on(\"lobby-file-info\", data => {\r\n      if (data.fileName) setCurrentFileInformation(data);\r\n    });\r\n\r\n    socket.on(\"file-upload-progress\", data => setUploadPercentage(data));\r\n\r\n    return () => {\r\n      socket.removeAllListeners(\"file-event-end\");\r\n      socket.removeAllListeners(\"lobby-file-info\");\r\n      socket.removeAllListeners(\"file-upload-progess\");\r\n    };\r\n\r\n    // set an event to fetch current content\r\n  }, [joinedToLobby, socket]);\r\n\r\n  const downloadFile = useCallback(() => {\r\n    window.open(\r\n      \"/lobby/\" + lobbyNumber + \"/download/\" + currentFileInformation.fileName\r\n    );\r\n  }, [currentFileInformation, lobbyNumber]);\r\n\r\n  return (\r\n    <Card style={cardStyle}>\r\n      <Card.Body>\r\n        <Card.Title>{lobbyNumberText}</Card.Title>\r\n        <Card.Subtitle className=\"mb-2 text-muted font-italic\">\r\n          Please wait until the file is fully uploaded\r\n        </Card.Subtitle>\r\n        <hr />\r\n        <div>\r\n          {currentFileInformation ? (\r\n            <InputGroup className=\"mb-3\">\r\n              <FormControl\r\n                placeholder={currentFileInformation.fileName}\r\n                aria-label={currentFileInformation.fileName}\r\n                aria-describedby=\"file\"\r\n                disabled={true}\r\n              />\r\n              <InputGroup.Append>\r\n                <Button variant=\"outline-secondary\" onClick={downloadFile}>\r\n                  Download\r\n                </Button>\r\n              </InputGroup.Append>\r\n            </InputGroup>\r\n          ) : (\r\n            <DownloadProgressBar percentage={uploadPercentage} />\r\n          )}\r\n        </div>\r\n      </Card.Body>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst cardStyle = {\r\n  marginTop: \"20px\",\r\n  minHeight: \"25vh\"\r\n};\r\n\r\nDownloadFileCard.propTypes = {\r\n  lobbyNumber: PropTypes.number.isRequired,\r\n  joinedToLobby: PropTypes.bool.isRequired,\r\n  socket: PropTypes.shape({\r\n    on: PropTypes.func.isRequired,\r\n    emit: PropTypes.func.isRequired\r\n  })\r\n};\r\n\r\nexport default DownloadFileCard;\r\n","// lib imports\r\nimport React, { useState, useEffect } from \"react\";\r\nimport io from \"socket.io-client\";\r\n// component imports\r\nimport CreateLobbyCard from \"../CreateLobbyCard/CreateLobbyCard\";\r\nimport UploadFileCard from \"../UploadFileCard/UploadFileCard\";\r\nimport JoinToLobbyCard from \"../JoinToLobbyCard/JoinToLobbyCard\";\r\nimport UserListCard from \"../UserListCard/UserListCard\";\r\nimport DownloadFileCard from \"../DownloadFileCard/DownloadFileCard\";\r\n\r\nconst FileSharingBox = () => {\r\n  const [lobbyNum, setLobbyNum] = useState(null);\r\n  const [joinedToLobby, setJoinedToLobby] = useState(false);\r\n  const [socket, setSocket] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!lobbyNum) return;\r\n    // set io\r\n    const sckt = io(\"/lobby-\" + lobbyNum, {\r\n      transports: [\"websocket\"]\r\n    });\r\n\r\n    console.log(sckt);\r\n\r\n    setSocket(sckt);\r\n\r\n    return () => {\r\n      sckt.disconnect();\r\n    };\r\n  }, [lobbyNum]);\r\n\r\n  // Rules:\r\n  /*\r\n    1. If there is no lobby show \"Create lobby buton\"\r\n    2. If lobby is created show file uploading screen and list of people\r\n        who have joined the lobby\r\n\r\n    3. Below all of that put an input to type lobby code\r\n    */\r\n\r\n  // Determine the component of upper card\r\n  let upperCard;\r\n  switch (true) {\r\n    // this is prioritized because of the common functions\r\n    case joinedToLobby:\r\n      upperCard = (\r\n        <DownloadFileCard\r\n          lobbyNumber={lobbyNum}\r\n          joinedToLobby={joinedToLobby}\r\n          socket={socket}\r\n        />\r\n      );\r\n      break;\r\n    case !!lobbyNum:\r\n      upperCard = <UploadFileCard lobbyNumber={lobbyNum} socket={socket} />;\r\n      break;\r\n\r\n    default:\r\n      upperCard = <CreateLobbyCard setLobbyNum={setLobbyNum} />;\r\n      break;\r\n  }\r\n\r\n  return (\r\n    <div style={FileSharingBoxStyle}>\r\n      {upperCard}\r\n      {/* Change these lines according to creation of the lobby */}\r\n      {lobbyNum ? (\r\n        <UserListCard socket={socket} />\r\n      ) : (\r\n        <JoinToLobbyCard\r\n          setLobbyNum={setLobbyNum}\r\n          setJoinedToLobby={setJoinedToLobby}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst FileSharingBoxStyle = {\r\n  marginTop: \"8vh\"\r\n};\r\n\r\nexport default FileSharingBox;\r\n","// lib imports\r\nimport React from \"react\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\n\r\n// Container imports\r\nimport Navbar from \"../Navbar/Navbar\";\r\nimport Body from \"../Body/Body\";\r\nimport FileSharingBox from \"../FileSharingBox/FileSharingBox\";\r\n\r\nconst FileSharingApp = () => {\r\n  return (\r\n    <div>\r\n      <Navbar />\r\n      <Body>\r\n        <Row>\r\n          <Col />\r\n          <Col sm={8} md={8} lg={6}>\r\n            <FileSharingBox />\r\n          </Col>\r\n          <Col />\r\n        </Row>\r\n      </Body>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FileSharingApp;\r\n","// lib imports\nimport React from \"react\";\n\n// Component imports\nimport FileSharingApp from \"./Components/FileSharingApp/FileSharingApp\";\n// CSS imports\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.css\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <FileSharingApp />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nif(module.hot) {\n  module.hot.accept();\n}","module.exports = __webpack_public_path__ + \"static/media/icon.9216203c.png\";"],"sourceRoot":""}